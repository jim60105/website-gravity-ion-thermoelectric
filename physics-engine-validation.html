<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰</title>
    
    <!-- Google Supported Meta Tags -->
    <meta name="description" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰ç³»çµ±ã€‚åŸºæ–¼ Chen's Paper é©—è­‰ç‰©ç†å¼•æ“å¯¦ä½œçš„æ­£ç¢ºæ€§ï¼ŒåŒ…å«ç‰©ç†å¸¸æ•¸ã€æ ¸å¿ƒæ–¹ç¨‹å¼ã€Table 1 æ•¸å€¼æ¯”è¼ƒç­‰å…¨é¢æ¸¬è©¦ã€‚" />
    <meta name="author" content="Kuo Tso Chen" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    
    <!-- Social Media Meta Tags -->
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://website-gravity-ion-thermoelectric.jim60105.workers.dev/physics-engine-validation.html" />
    <meta property="og:title" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰ | Physics Engine Validation" />
    <meta property="og:description" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰ç³»çµ±ã€‚åŸºæ–¼ Chen's Paper é©—è­‰ç‰©ç†å¼•æ“å¯¦ä½œçš„æ­£ç¢ºæ€§ï¼ŒåŒ…å«ç‰©ç†å¸¸æ•¸ã€æ ¸å¿ƒæ–¹ç¨‹å¼ã€Table 1 æ•¸å€¼æ¯”è¼ƒç­‰å…¨é¢æ¸¬è©¦ã€‚" />
    <meta property="og:image" content="https://website-gravity-ion-thermoelectric.jim60105.workers.dev/favicon.svg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰ç³»çµ±" />
    <meta property="og:site_name" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“" />
    <meta property="og:locale" content="zh_TW" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@jim60105" />
    <meta name="twitter:creator" content="@jim60105" />
    <meta name="twitter:title" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰ | Physics Engine Validation" />
    <meta name="twitter:description" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰ç³»çµ±ã€‚åŸºæ–¼ Chen's Paper é©—è­‰ç‰©ç†å¼•æ“å¯¦ä½œçš„æ­£ç¢ºæ€§ï¼ŒåŒ…å«ç‰©ç†å¸¸æ•¸ã€æ ¸å¿ƒæ–¹ç¨‹å¼ã€Table 1 æ•¸å€¼æ¯”è¼ƒç­‰å…¨é¢æ¸¬è©¦ã€‚" />
    <meta name="twitter:image" content="https://website-gravity-ion-thermoelectric.jim60105.workers.dev/favicon.svg" />
    <meta name="twitter:image:alt" content="é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰ç³»çµ±" />
    
    <!-- Link Tags -->
    <!-- Canonical URL -->
    <link rel="canonical" href="https://website-gravity-ion-thermoelectric.jim60105.workers.dev/physics-engine-validation.html" />
    
    <!-- Alternate Languages -->
    <link rel="alternate" hreflang="zh-TW" href="https://website-gravity-ion-thermoelectric.jim60105.workers.dev/physics-engine-validation.html" />
    <link rel="alternate" hreflang="x-default" href="https://website-gravity-ion-thermoelectric.jim60105.workers.dev/physics-engine-validation.html" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#3498db',
                        'primary-dark': '#2980b9',
                        'secondary': '#95a5a6',
                        'accent': '#e67e22',
                        'success': '#27ae60',
                        'warning': '#f39c12',
                        'error': '#e74c3c'
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
    <!-- Main Container -->
    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-lg shadow-lg mb-6">
            <div class="px-6 py-8 text-center">
                <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-3">
                    é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ç‰©ç†å¼•æ“é©—è­‰
                </h1>
                <p class="text-blue-100 text-sm sm:text-base">
                    åŸºæ–¼ Chen's Paper: "An Exception to Carnot's Theorem Inferred from Tolman's Experiment"
                </p>
                <p class="text-blue-100 text-sm sm:text-base">
                    æ­¤ç³»çµ±ç”¨æ–¼é©—è­‰ç¶²é å¯¦ä½œçš„ç‰©ç†å¼•æ“å¯¦ä½œæ˜¯å¦ç¬¦åˆè«–æ–‡ä¸­çš„æ•¸å€¼èˆ‡ç†è«–ã€‚
                </p>
            </div>
        </header>

        <!-- Status Dashboard -->
        <section class="bg-white rounded-lg shadow-md mb-6">
            <div class="px-6 py-4 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-800 flex items-center">
                    <span class="w-2 h-2 bg-green-500 rounded-full mr-3"></span>
                    å¼•æ“ç‹€æ…‹ç¸½è¦½
                </h2>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-blue-50 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-blue-600 font-medium">ç•¶å‰æ¨¡å¼</p>
                                <p class="text-xl font-bold text-blue-800" id="current-mode">NIST æ¨™æº–</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                <span class="text-white text-xl">ğŸ§ª</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-green-50 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-green-600 font-medium">é©—è­‰ç‹€æ…‹</p>
                                <p class="text-xl font-bold text-green-800" id="validation-status">å¾…åŸ·è¡Œ</p>
                            </div>
                            <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                <span class="text-white text-xl" id="status-icon">â³</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-purple-600 font-medium">é€šéç‡</p>
                                <p class="text-xl font-bold text-purple-800" id="pass-rate">--</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                <span class="text-white text-xl">ğŸ“Š</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-wrap gap-3 justify-center">
                    <button 
                        class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2"
                        onclick="runValidation('nist')"
                        id="nist-btn"
                    >
                        ğŸ§ª ä½¿ç”¨ NIST æ¨™æº–é©—è­‰
                    </button>
                    <button 
                        class="bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2"
                        onclick="runValidation('paper')"
                        id="paper-btn"
                    >
                        ğŸ“„ ä½¿ç”¨è«–æ–‡æ•¸å€¼é©—è­‰
                    </button>
                    <button 
                        class="bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2"
                        onclick="runComparison()"
                        id="compare-btn"
                    >
                        âš–ï¸ æ¯”è¼ƒåˆ†æ
                    </button>
                    <button 
                        class="bg-green-500 hover:bg-green-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2"
                        onclick="exportResults()"
                        id="export-btn"
                        disabled
                    >
                        ğŸ“¥ åŒ¯å‡ºçµæœ
                    </button>
                </div>

                <!-- Progress Bar -->
                <div class="mt-6">
                    <div class="flex justify-between text-sm text-gray-600 mb-1">
                        <span>é©—è­‰é€²åº¦</span>
                        <span id="progress-text">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-blue-500 h-2 rounded-full transition-all duration-500" style="width: 0%" id="progress-bar"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Test Results Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6" id="results-grid">
            <!-- Quick Start Guide -->
            <article class="lg:col-span-2 bg-white rounded-lg shadow-md">
                <div class="px-6 py-4 bg-gradient-to-r from-green-50 to-emerald-50 border-b border-gray-200 rounded-t-lg">
                    <h3 class="text-lg font-semibold text-green-800 flex items-center">
                        <span class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3">
                            <span class="text-white text-sm">â„¹</span>
                        </span>
                        å¿«é€Ÿé–‹å§‹
                    </h3>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">ğŸ§ª NIST æ¨™æº–æ¨¡å¼</h4>
                            <p class="text-gray-600 text-sm mb-4">ä½¿ç”¨åœ‹éš›æ¨™æº–åŸå­è³ªé‡é€²è¡Œé©—è­‰ï¼Œç¢ºä¿ç§‘å­¸æº–ç¢ºæ€§</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>â€¢ åŸºæ–¼ NIST/CODATA 2018 æ¨™æº–</li>
                                <li>â€¢ é©ç”¨æ–¼å¯¦éš›å·¥ç¨‹æ‡‰ç”¨</li>
                                <li>â€¢ æ¨è–¦ç”¨æ–¼ç§‘å­¸ç ”ç©¶</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">ğŸ“„ è«–æ–‡æ•¸å€¼æ¨¡å¼</h4>
                            <p class="text-gray-600 text-sm mb-4">ä½¿ç”¨è«–æ–‡ä¸­çš„è³ªé‡å€¼ï¼Œé‡ç¾ Table 1 çµæœ</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>â€¢ åŸºæ–¼ Chen's Paper æ•¸å€¼</li>
                                <li>â€¢ é‡ç¾è«–æ–‡è¨ˆç®—çµæœ</li>
                                <li>â€¢ é©—è­‰ç†è«–æ¨¡å‹ä¸€è‡´æ€§</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </article>
        </div>

        <!-- Loading Overlay -->
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="loading-overlay">
            <div class="bg-white rounded-lg p-8 text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
                <p class="text-gray-700">æ­£åœ¨åŸ·è¡Œé©—è­‰æ¸¬è©¦...</p>
                <p class="text-sm text-gray-500 mt-2" id="loading-step">æº–å‚™ä¸­</p>
            </div>
        </div>

        <!-- Test Detail Modal -->
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="detail-modal">
            <div class="bg-white rounded-lg max-w-4xl mx-4 max-h-[90vh] overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-gray-800" id="detail-title">æ¸¬è©¦è©³ç´°è³‡è¨Š</h3>
                    <button 
                        class="text-gray-400 hover:text-gray-600 text-xl font-bold"
                        onclick="closeTestDetail()"
                    >
                        Ã—
                    </button>
                </div>
                <div class="p-6" id="detail-content">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/physics-engine.js"></script>
    <script>
        // Application State
        const appState = {
            currentMode: 'nist',
            testResults: {},
            isRunning: false
        };

        // Constants
        const AMU_TO_KG = 1.66053906660e-27;
        const NIST_ATOMIC_MASSES = {
            'H': 1.00782503223,
            'Li': 7.0160034366,
            'Cl': 34.968852682,
            'K': 38.9637064864,
            'I': 126.9044719
        };

        const PAPER_EXPECTED_VALUES = {
            SMALL: {
                omegaSquared: 9.189e9,
                acceleration: 4.594e7,
                electricField: 29.97,
                powerDensityLiquid: 190.92,
                powerDensityCombined: 72.23
            },
            MEDIUM: {
                omegaSquared: 5.743e8,
                acceleration: 1.1486e7,
                electricField: 7.494,
                powerDensityLiquid: 11.933,
                powerDensityCombined: 4.514
            },
            LARGE: {
                omegaSquared: 3.589e7,
                acceleration: 2.872e6,
                electricField: 1.8734,
                powerDensityLiquid: 0.7458,
                powerDensityCombined: 0.2821
            }
        };

        // UI Utilities
        const $ = (id) => document.getElementById(id);
        const updateProgress = (percent) => {
            $('progress-bar').style.width = `${percent}%`;
            $('progress-text').textContent = `${Math.round(percent)}%`;
        };

        const showLoading = (show, step = 'æº–å‚™ä¸­') => {
            $('loading-overlay').classList.toggle('hidden', !show);
            if (show) $('loading-step').textContent = step;
        };

        const updateStatus = (status, icon, passRate = '--') => {
            $('validation-status').textContent = status;
            $('status-icon').textContent = icon;
            $('pass-rate').textContent = passRate;
        };

        const updateCurrentMode = (mode) => {
            appState.currentMode = mode;
            $('current-mode').textContent = mode === 'nist' ? 'NIST æ¨™æº–' : 'è«–æ–‡æ•¸å€¼';
        };

        // Test Functions
        const validatePhysicalConstants = () => {
            const engine = new PhysicsEngine();
            return [
                {
                    name: 'Boltzmann å¸¸æ•¸',
                    expected: 1.380649e-23,
                    actual: engine.CONSTANTS.BOLTZMANN_CONSTANT,
                    unit: 'J/K',
                    pass: Math.abs(engine.CONSTANTS.BOLTZMANN_CONSTANT - 1.380649e-23) < 1e-28
                },
                {
                    name: 'åŸºæœ¬é›»è·',
                    expected: 1.602176634e-19,
                    actual: engine.CONSTANTS.ELECTRON_CHARGE,
                    unit: 'C',
                    pass: Math.abs(engine.CONSTANTS.ELECTRON_CHARGE - 1.602176634e-19) < 1e-28
                },
                {
                    name: 'é‹åˆé‡‘é™ä¼å¼·åº¦',
                    expected: 670e6,
                    actual: engine.CONSTANTS.MATERIAL_PROPERTIES.ALUMINUM_ALLOY_YIELD,
                    unit: 'Pa',
                    pass: Math.abs(engine.CONSTANTS.MATERIAL_PROPERTIES.ALUMINUM_ALLOY_YIELD - 670e6) < 1e6
                }
            ];
        };

        const validateEquations = (usePaperMasses) => {
            const engine = new PhysicsEngine();
            engine.setMassSource(usePaperMasses);
            
            // Boltzmann distribution test
            const testMass = 1e-26;
            const testAccel = 9.81;
            const testHeight = 1.0;
            const temperature = 298.15;
            
            const ratio = engine.calculateBoltzmannRatio(testMass, testAccel, testHeight, temperature);
            const expectedRatio = Math.exp(-(testMass * testAccel * testHeight) / (engine.CONSTANTS.BOLTZMANN_CONSTANT * temperature));
            
            // Electric field test
            const heavyMass = 2e-25;
            const lightMass = 1e-26;
            const acceleration = 1e7;
            
            const electricField = engine.calculateElectricField(heavyMass, lightMass, acceleration);
            const expectedField = (heavyMass - lightMass) * acceleration / (2 * engine.CONSTANTS.ELECTRON_CHARGE);
            
            return [
                {
                    name: 'Boltzmann åˆ†å¸ƒ',
                    formula: 'C(h+Î”h)/C(h) = exp(-mGÎ”h/kT)',
                    pass: Math.abs(ratio - expectedRatio) < 1e-10
                },
                {
                    name: 'é›»å ´å¼·åº¦è¨ˆç®—',
                    formula: 'E = (m_heavy - m_light)G / (2q)',
                    pass: Math.abs(electricField - expectedField) < 1e-10
                }
            ];
        };

        const validateTable1 = (usePaperMasses) => {
            const engine = new PhysicsEngine();
            const results = engine.validateAgainstPaperTable1(usePaperMasses);
            
            Object.keys(results).forEach(size => {
                if (results[size].expected) {
                    const calc = results[size].calculated;
                    const exp = results[size].expected;
                    
                    results[size].errors = {
                        omegaSquared: Math.abs((calc.omegaSquared - exp.omegaSquared) / exp.omegaSquared) * 100,
                        powerDensityCombined: Math.abs((calc.powerDensityCombined - exp.powerDensityCombined) / exp.powerDensityCombined) * 100
                    };
                    
                    const tolerance = usePaperMasses ? 1.0 : 10.0;
                    results[size].pass = Object.values(results[size].errors).every(error => error < tolerance);
                }
            });
            
            return results;
        };

        // Report Generation
        const createTestCard = (title, icon, results, type) => {
            const passCount = Array.isArray(results) ? results.filter(r => r.pass).length : 0;
            const totalCount = Array.isArray(results) ? results.length : 0;
            const passRate = totalCount > 0 ? Math.round((passCount / totalCount) * 100) : 0;
            
            return `
                <article class="bg-white rounded-lg shadow-md">
                    <div class="px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 rounded-t-lg">
                        <h3 class="text-lg font-semibold text-blue-800 flex items-center">
                            <span class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                                <span class="text-white text-sm">${icon}</span>
                            </span>
                            ${title}
                        </h3>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-sm text-gray-600">é€šéç‡</span>
                            <span class="text-lg font-bold ${passRate >= 80 ? 'text-green-600' : passRate >= 60 ? 'text-yellow-600' : 'text-red-600'}">
                                ${passRate}% (${passCount}/${totalCount})
                            </span>
                        </div>
                        ${generateTestTable(results, type)}
                    </div>
                </article>
            `;
        };

        const generateTestTable = (results, type) => {
            if (!Array.isArray(results)) return '';
            
            let html = `
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">é …ç›®</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç‹€æ…‹</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">è©³ç´°</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
            `;
            
            results.forEach((result, index) => {
                const statusClass = result.pass ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800';
                const statusText = result.pass ? 'âœ… é€šé' : 'âŒ å¤±æ•—';
                const resultId = `${type}_${index}`;
                
                html += `
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3 text-sm text-gray-900">${result.name || result.formula}</td>
                        <td class="px-4 py-3 text-sm">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${statusClass}">
                                ${statusText}
                            </span>
                        </td>
                        <td class="px-4 py-3 text-sm">
                            <button 
                                class="text-blue-600 hover:text-blue-800 font-medium text-xs"
                                onclick="showTestDetail('${resultId}', ${JSON.stringify(result).replace(/"/g, '&quot;')})"
                            >
                                ğŸ“Š æŸ¥çœ‹è©³ç´°
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            
            return html;
        };

        const createTable1Card = (results, mode) => {
            const sizes = Object.keys(results).filter(size => results[size].expected);
            const totalPass = sizes.filter(size => results[size].pass).length;
            const passRate = sizes.length > 0 ? Math.round((totalPass / sizes.length) * 100) : 0;
            
            let html = `
                <article class="bg-white rounded-lg shadow-md">
                    <div class="px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 rounded-t-lg">
                        <h3 class="text-lg font-semibold text-blue-800 flex items-center">
                            <span class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                                <span class="text-white text-sm">ğŸ“‹</span>
                            </span>
                            Table 1 é©—è­‰
                        </h3>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-sm text-gray-600">é€šéç‡</span>
                            <span class="text-lg font-bold ${passRate >= 80 ? 'text-green-600' : passRate >= 60 ? 'text-yellow-600' : 'text-red-600'}">
                                ${passRate}% (${totalPass}/${sizes.length})
                            </span>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">çµæ§‹å¤§å°</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç‹€æ…‹</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">è©³ç´°</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
            `;
            
            sizes.forEach((size, index) => {
                const result = results[size];
                const statusClass = result.pass ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800';
                const statusText = result.pass ? 'âœ… é€šé' : 'âŒ å¤±æ•—';
                
                html += `
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3 text-sm text-gray-900">${size} (r1=${result.structure.r1}m)</td>
                        <td class="px-4 py-3 text-sm">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${statusClass}">
                                ${statusText}
                            </span>
                        </td>
                        <td class="px-4 py-3 text-sm">
                            <button 
                                class="text-blue-600 hover:text-blue-800 font-medium text-xs"
                                onclick="showTable1Detail('${size}', ${JSON.stringify(result).replace(/"/g, '&quot;')})"
                            >
                                ğŸ“Š æŸ¥çœ‹è©³ç´°
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            html += `
                                </tbody>
                            </table>
                        </div>
                    </div>
                </article>
            `;
            
            return html;
        };

        const generateSummaryCard = (mode, allResults) => {
            const { constants, equations, table1 } = allResults;
            
            const constantsPass = constants.every(c => c.pass);
            const equationsPass = equations.every(e => e.pass);
            const table1Pass = Object.values(table1).some(t => t.pass);
            
            const totalPassed = [constantsPass, equationsPass, table1Pass].filter(Boolean).length;
            const overallPass = (totalPassed / 3) * 100;
            
            let statusColor = 'red';
            let statusMessage = 'éœ€è¦æ”¹é€²';
            
            if (overallPass >= 80) {
                statusColor = 'green';
                statusMessage = 'é©—è­‰é€šé';
            } else if (overallPass >= 60) {
                statusColor = 'yellow';
                statusMessage = 'åŸºæœ¬é€šé';
            }
            
            return `
                <article class="lg:col-span-2 bg-gradient-to-r from-${statusColor}-50 to-${statusColor}-100 rounded-lg shadow-md border-l-4 border-${statusColor}-500">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-${statusColor}-800 mb-4">
                            ğŸ“‹ é©—è­‰ç¸½çµ - ${mode === 'nist' ? 'NIST æ¨™æº–æ¨¡å¼' : 'è«–æ–‡æ•¸å€¼æ¨¡å¼'}
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-${statusColor}-700">${Math.round(overallPass)}%</div>
                                <div class="text-sm text-${statusColor}-600">ç¸½é«”é€šéç‡</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-${statusColor}-700">${totalPassed}/3</div>
                                <div class="text-sm text-${statusColor}-600">æ¨¡çµ„é€šé</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl text-${statusColor}-700">${statusMessage}</div>
                                <div class="text-sm text-${statusColor}-600">é©—è­‰çµæœ</div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-3">è©³ç´°çµæœ</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">ç‰©ç†å¸¸æ•¸é©—è­‰</span>
                                    <span class="px-2 py-1 text-xs rounded-full ${constantsPass ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                        ${constantsPass ? 'âœ… é€šé' : 'âŒ å¤±æ•—'}
                                    </span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">æ–¹ç¨‹å¼é©—è­‰</span>
                                    <span class="px-2 py-1 text-xs rounded-full ${equationsPass ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                        ${equationsPass ? 'âœ… é€šé' : 'âŒ å¤±æ•—'}
                                    </span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Table 1 é©—è­‰</span>
                                    <span class="px-2 py-1 text-xs rounded-full ${table1Pass ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                        ${table1Pass ? 'âœ… é€šé' : 'âŒ å¤±æ•—'}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>
            `;
        };

        // Main Validation Function
        const runValidation = async (mode) => {
            if (appState.isRunning) return;
            
            appState.isRunning = true;
            const usePaperMasses = mode === 'paper';
            updateCurrentMode(mode);
            showLoading(true, 'åˆå§‹åŒ–æ¸¬è©¦...');
            updateProgress(0);
            updateStatus('åŸ·è¡Œä¸­', 'â³');
            
            try {
                // Step 1: Constants validation
                showLoading(true, 'é©—è­‰ç‰©ç†å¸¸æ•¸...');
                updateProgress(20);
                const constants = validatePhysicalConstants();
                
                // Step 2: Equations validation
                showLoading(true, 'é©—è­‰æ ¸å¿ƒæ–¹ç¨‹å¼...');
                updateProgress(50);
                const equations = validateEquations(usePaperMasses);
                
                // Step 3: Table 1 validation
                showLoading(true, 'é©—è­‰è«–æ–‡æ•¸å€¼...');
                updateProgress(80);
                const table1 = validateTable1(usePaperMasses);
                
                // Complete
                updateProgress(100);
                
                // Store results
                appState.testResults[mode] = { constants, equations, table1 };
                
                // Generate UI
                const resultsGrid = $('results-grid');
                resultsGrid.innerHTML = `
                    ${createTestCard('ç‰©ç†å¸¸æ•¸é©—è­‰', 'âš›', constants, 'constants')}
                    ${createTestCard('æ ¸å¿ƒæ–¹ç¨‹å¼é©—è­‰', 'ğŸ“', equations, 'equations')}
                    ${createTable1Card(table1, mode)}
                    ${generateSummaryCard(mode, { constants, equations, table1 })}
                `;
                
                // Update status
                const overallPass = calculateOverallPass({ constants, equations, table1 });
                updateStatus('å®Œæˆ', 'âœ…', `${Math.round(overallPass)}%`);
                $('export-btn').disabled = false;
                $('export-btn').classList.remove('opacity-50');
                
            } catch (error) {
                console.error('Validation failed:', error);
                updateStatus('å¤±æ•—', 'âŒ');
                $('results-grid').innerHTML = `
                    <div class="lg:col-span-2 bg-red-50 rounded-lg border-l-4 border-red-500 p-6">
                        <div class="flex">
                            <div class="text-red-500 text-xl mr-3">âŒ</div>
                            <div>
                                <h3 class="text-red-800 font-semibold">é©—è­‰åŸ·è¡Œå¤±æ•—</h3>
                                <p class="text-red-700 mt-1">${error.message}</p>
                            </div>
                        </div>
                    </div>
                `;
            } finally {
                showLoading(false);
                appState.isRunning = false;
            }
        };

        const runComparison = async () => {
            if (appState.isRunning) return;
            
            showLoading(true, 'åŸ·è¡Œæ¯”è¼ƒåˆ†æ...');
            updateStatus('æ¯”è¼ƒä¸­', 'âš–ï¸');
            
            try {
                await runValidation('nist');
                await runValidation('paper');
                
                // Generate comparison report
                if (appState.testResults.nist && appState.testResults.paper) {
                    generateComparisonReport();
                }
                
                updateStatus('æ¯”è¼ƒå®Œæˆ', 'âœ…');
            } catch (error) {
                console.error('Comparison failed:', error);
                updateStatus('æ¯”è¼ƒå¤±æ•—', 'âŒ');
            } finally {
                showLoading(false);
            }
        };

        const generateComparisonReport = () => {
            // Implementation would be added here for comparison functionality
            console.log('Comparison report generated');
        };

        const calculateOverallPass = ({ constants, equations, table1 }) => {
            const constantsPass = constants.every(c => c.pass);
            const equationsPass = equations.every(e => e.pass);
            const table1Pass = Object.values(table1).some(t => t.pass);
            
            const totalPassed = [constantsPass, equationsPass, table1Pass].filter(Boolean).length;
            return (totalPassed / 3) * 100;
        };

        const exportResults = () => {
            if (Object.keys(appState.testResults).length === 0) {
                alert('è«‹å…ˆåŸ·è¡Œæ¸¬è©¦å¾Œå†åŒ¯å‡ºçµæœ');
                return;
            }
            
            const exportData = {
                exportInfo: {
                    timestamp: new Date().toISOString(),
                    version: 'Physics Engine Validation v2.0',
                    description: 'Gravity Ion Thermoelectric Technology Physics Engine Validation Results'
                },
                testResults: appState.testResults
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `physics-engine-validation-${new Date().toISOString().slice(0, 10)}.json`;
            link.click();
        };

        // Test Detail Modal Functions
        const showTestDetail = (testId, testData) => {
            const modal = $('detail-modal');
            const title = $('detail-title');
            const content = $('detail-content');
            
            title.textContent = `${testData.name || testData.formula} - è©³ç´°è³‡è¨Š`;
            content.innerHTML = generateDetailContent(testData);
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        };

        const closeTestDetail = () => {
            const modal = $('detail-modal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        };

        const showTable1Detail = (size, resultData) => {
            const modal = $('detail-modal');
            const title = $('detail-title');
            const content = $('detail-content');
            
            title.textContent = `Table 1 é©—è­‰ - ${size} çµæ§‹è©³ç´°è³‡è¨Š`;
            content.innerHTML = generateTable1DetailContent(size, resultData);
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        };

        const generateDetailContent = (testData) => {
            let html = '';
            
            // Test status overview
            const statusClass = testData.pass ? 'text-green-600' : 'text-red-600';
            const statusIcon = testData.pass ? 'âœ…' : 'âŒ';
            const statusText = testData.pass ? 'é€šé' : 'å¤±æ•—';
            
            html += `
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-semibold text-gray-800">æ¸¬è©¦ç‹€æ…‹</h4>
                        <span class="text-2xl ${statusClass} font-bold">
                            ${statusIcon} ${statusText}
                        </span>
                    </div>
                    <div class="text-sm text-gray-600">
                        <strong>æ¸¬è©¦é …ç›®ï¼š</strong>${testData.name || testData.formula}
                    </div>
                </div>
            `;

            // Physical constants details
            if (testData.expected !== undefined && testData.actual !== undefined) {
                html += `
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">æ•¸å€¼æ¯”è¼ƒ</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <div class="text-sm text-blue-600 font-medium">æœŸæœ›å€¼</div>
                                <div class="text-lg font-mono text-blue-800">${testData.expected.toExponential(9)}</div>
                                ${testData.unit ? `<div class="text-xs text-blue-500">${testData.unit}</div>` : ''}
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <div class="text-sm text-green-600 font-medium">å¯¦éš›å€¼</div>
                                <div class="text-lg font-mono text-green-800">${testData.actual.toExponential(9)}</div>
                                ${testData.unit ? `<div class="text-xs text-green-500">${testData.unit}</div>` : ''}
                            </div>
                        </div>
                        
                        <div class="mt-4 p-4 bg-yellow-50 rounded-lg">
                            <div class="text-sm text-yellow-600 font-medium">çµ•å°èª¤å·®</div>
                            <div class="text-lg font-mono text-yellow-800">
                                ${Math.abs(testData.actual - testData.expected).toExponential(6)}
                            </div>
                            <div class="text-sm text-yellow-600 mt-1">
                                ç›¸å°èª¤å·®: ${(Math.abs(testData.actual - testData.expected) / Math.abs(testData.expected) * 100).toFixed(8)}%
                            </div>
                        </div>
                    </div>
                `;
            }

            // Formula details for equation tests
            if (testData.formula) {
                html += `
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">æ–¹ç¨‹å¼è³‡è¨Š</h4>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="text-sm text-gray-600 font-medium mb-2">æ•¸å­¸å…¬å¼</div>
                            <div class="text-lg font-mono bg-white p-3 rounded border">
                                ${testData.formula}
                            </div>
                        </div>
                        
                        ${testData.calculated !== undefined && testData.expected !== undefined ? `
                            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <div class="text-sm text-blue-600 font-medium">è¨ˆç®—çµæœ</div>
                                    <div class="text-lg font-mono text-blue-800">${testData.calculated.toExponential(6)}</div>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <div class="text-sm text-green-600 font-medium">ç†è«–å€¼</div>
                                    <div class="text-lg font-mono text-green-800">${testData.expected.toExponential(6)}</div>
                                </div>
                            </div>
                            
                            <div class="mt-4 p-4 bg-purple-50 rounded-lg">
                                <div class="text-sm text-purple-600 font-medium">è¨ˆç®—èª¤å·®</div>
                                <div class="text-lg font-mono text-purple-800">
                                    ${testData.error ? testData.error.toExponential(6) : 'N/A'}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            // Test methodology
            html += `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">æ¸¬è©¦æ–¹æ³•</h4>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        ${getTestMethodology(testData)}
                    </div>
                </div>
            `;

            // Validation criteria
            html += `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">é©—è­‰æ¨™æº–</h4>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        ${getValidationCriteria(testData)}
                    </div>
                </div>
            `;

            // Scientific context
            html += `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">ç§‘å­¸èƒŒæ™¯</h4>
                    <div class="bg-gray-50 p-4 rounded-lg text-sm text-gray-700">
                        ${getScientificContext(testData)}
                    </div>
                </div>
            `;

            return html;
        };

        const getTestMethodology = (testData) => {
            if (testData.name === 'Boltzmann å¸¸æ•¸') {
                return `
                    <div class="text-sm text-gray-700">
                        <p><strong>æ¯”è¼ƒæ–¹æ³•ï¼š</strong>å¼•æ“å…§å»ºå¸¸æ•¸ vs CODATA 2018 æ¨è–¦å€¼</p>
                        <p><strong>ç²¾ç¢ºåº¦è¦æ±‚ï¼š</strong>çµ•å°èª¤å·® < 1Ã—10â»Â²â¸ J/K</p>
                        <p><strong>è³‡æ–™ä¾†æºï¼š</strong>NIST/CODATA 2018 åŸºæœ¬ç‰©ç†å¸¸æ•¸</p>
                    </div>
                `;
            } else if (testData.name === 'åŸºæœ¬é›»è·') {
                return `
                    <div class="text-sm text-gray-700">
                        <p><strong>æ¯”è¼ƒæ–¹æ³•ï¼š</strong>å¼•æ“å…§å»ºå¸¸æ•¸ vs CODATA 2018 å®šç¾©å€¼</p>
                        <p><strong>ç²¾ç¢ºåº¦è¦æ±‚ï¼š</strong>çµ•å°èª¤å·® < 1Ã—10â»Â²â¸ C</p>
                        <p><strong>è³‡æ–™ä¾†æºï¼š</strong>SI åŸºæœ¬å–®ä½é‡æ–°å®šç¾©å¾Œçš„ç²¾ç¢ºå€¼</p>
                    </div>
                `;
            } else if (testData.name === 'é‹åˆé‡‘é™ä¼å¼·åº¦') {
                return `
                    <div class="text-sm text-gray-700">
                        <p><strong>æ¯”è¼ƒæ–¹æ³•ï¼š</strong>å¼•æ“ææ–™å¸¸æ•¸ vs å·¥ç¨‹æ¨™æº–å€¼</p>
                        <p><strong>ç²¾ç¢ºåº¦è¦æ±‚ï¼š</strong>çµ•å°èª¤å·® < 1Ã—10â¶ Pa</p>
                        <p><strong>è³‡æ–™ä¾†æºï¼š</strong>å·¥ç¨‹ææ–™æ‰‹å†Šæ¨™æº–å€¼</p>
                    </div>
                `;
            } else if (testData.formula && testData.formula.includes('Boltzmann')) {
                return `
                    <div class="text-sm text-gray-700">
                        <p><strong>æ¸¬è©¦åƒæ•¸ï¼š</strong></p>
                        <ul class="list-disc ml-4 mt-2">
                            <li>æ¸¬è©¦è³ªé‡: 1Ã—10â»Â²â¶ kg</li>
                            <li>é‡åŠ›åŠ é€Ÿåº¦: 9.81 m/sÂ²</li>
                            <li>é«˜åº¦å·®: 1.0 m</li>
                            <li>æº«åº¦: 298.15 K (25Â°C)</li>
                        </ul>
                        <p class="mt-2"><strong>é©—è­‰æ–¹æ³•ï¼š</strong>æ¯”è¼ƒå¼•æ“è¨ˆç®—çµæœèˆ‡ç†è«–å…¬å¼ç›´æ¥è¨ˆç®—çµæœ</p>
                    </div>
                `;
            } else if (testData.formula && testData.formula.includes('electric')) {
                return `
                    <div class="text-sm text-gray-700">
                        <p><strong>æ¸¬è©¦åƒæ•¸ï¼š</strong></p>
                        <ul class="list-disc ml-4 mt-2">
                            <li>é‡é›¢å­è³ªé‡: 2Ã—10â»Â²âµ kg</li>
                            <li>è¼•é›¢å­è³ªé‡: 1Ã—10â»Â²â¶ kg</li>
                            <li>åŠ é€Ÿåº¦: 1Ã—10â· m/sÂ²</li>
                        </ul>
                        <p class="mt-2"><strong>é©—è­‰æ–¹æ³•ï¼š</strong>æ¯”è¼ƒå¼•æ“é›»å ´è¨ˆç®—èˆ‡ç†è«–å…¬å¼çµæœ</p>
                    </div>
                `;
            }
            return '<p class="text-sm text-gray-700">æ¨™æº–æ•¸å€¼æ¯”è¼ƒé©—è­‰</p>';
        };

        const getValidationCriteria = (testData) => {
            if (testData.pass) {
                return `
                    <div class="text-sm text-green-700">
                        <p><strong>âœ… é€šéæ¨™æº–ï¼š</strong></p>
                        <p>è¨ˆç®—çµæœåœ¨å¯æ¥å—çš„èª¤å·®ç¯„åœå…§ï¼Œç¬¦åˆç§‘å­¸ç²¾ç¢ºåº¦è¦æ±‚ã€‚</p>
                    </div>
                `;
            } else {
                return `
                    <div class="text-sm text-red-700">
                        <p><strong>âŒ æœªé€šéåŸå› ï¼š</strong></p>
                        <p>è¨ˆç®—çµæœè¶…å‡ºå¯æ¥å—çš„èª¤å·®ç¯„åœï¼Œéœ€è¦æª¢æŸ¥å¯¦ä½œæˆ–åƒæ•¸è¨­å®šã€‚</p>
                    </div>
                `;
            }
        };

        const getScientificContext = (testData) => {
            if (testData.name === 'Boltzmann å¸¸æ•¸') {
                return `
                    Boltzmannå¸¸æ•¸æ˜¯çµ±è¨ˆåŠ›å­¸çš„åŸºæœ¬å¸¸æ•¸ï¼Œé€£æ¥äº†å¾®è§€ç²’å­çš„ç†±é‹å‹•èˆ‡å·¨è§€æº«åº¦ã€‚
                    åœ¨é‡åŠ›é›¢å­ç†±é›»æŠ€è¡“ä¸­ï¼Œæ­¤å¸¸æ•¸ç”¨æ–¼è¨ˆç®—é›¢å­åœ¨é‡åŠ›å ´ä¸­çš„Boltzmannåˆ†å¸ƒï¼Œ
                    æ˜¯ç†è«–æ¨¡å‹çš„æ ¸å¿ƒåƒæ•¸ä¹‹ä¸€ã€‚
                `;
            } else if (testData.name === 'åŸºæœ¬é›»è·') {
                return `
                    åŸºæœ¬é›»è·æ˜¯è‡ªç„¶ç•Œçš„åŸºæœ¬å¸¸æ•¸ï¼Œå®šç¾©äº†å–®å€‹é›»å­æˆ–è³ªå­æ‰€æ”œå¸¶çš„é›»è·é‡ã€‚
                    åœ¨é‡åŠ›é›¢å­ç†±é›»ç³»çµ±ä¸­ï¼Œæ­¤å¸¸æ•¸ç”¨æ–¼è¨ˆç®—é›¢å­åˆ†é›¢æ‰€ç”¢ç”Ÿçš„é›»å ´å¼·åº¦ï¼Œ
                    ç›´æ¥å½±éŸ¿ç³»çµ±çš„ç™¼é›»æ•ˆç‡è¨ˆç®—ã€‚
                `;
            } else if (testData.formula && testData.formula.includes('Boltzmann')) {
                return `
                    Boltzmannåˆ†å¸ƒæè¿°äº†ç²’å­åœ¨é‡åŠ›ä½èƒ½å ´ä¸­çš„æ¿ƒåº¦åˆ†å¸ƒã€‚æ ¹æ“šChen's Paperï¼Œ
                    é‡é›¢å­å’Œè¼•é›¢å­åœ¨é‡åŠ›å ´ä¸­æœƒç”¢ç”Ÿä¸åŒçš„åˆ†å¸ƒï¼Œé€™ç¨®åˆ†å¸ƒå·®ç•°æ˜¯
                    é‡åŠ›é›¢å­ç†±é›»æ•ˆæ‡‰çš„ç‰©ç†åŸºç¤ã€‚
                `;
            } else if (testData.formula && testData.formula.includes('electric')) {
                return `
                    é›»å ´å¼·åº¦è¨ˆç®—åŸºæ–¼ä¸åŒè³ªé‡é›¢å­åœ¨åŠ é€Ÿåº¦å ´ä¸­çš„åˆ†é›¢æ•ˆæ‡‰ã€‚
                    æ ¹æ“šè«–æ–‡ç†è«–ï¼Œè³ªé‡å·®ç•°æœƒåœ¨åŠ é€Ÿåº¦å ´ä¸­ç”¢ç”Ÿæœ‰æ•ˆçš„é›»è·åˆ†é›¢ï¼Œ
                    é€²è€Œå»ºç«‹é›»å ´ä¸¦é©…å‹•é›»æµç”¢ç”Ÿã€‚
                `;
            }
            return 'æ­¤æ¸¬è©¦é©—è­‰ç‰©ç†å¼•æ“å¯¦ä½œçš„æ­£ç¢ºæ€§ï¼Œç¢ºä¿è¨ˆç®—çµæœç¬¦åˆç†è«–é æœŸã€‚';
        };

        const generateTable1DetailContent = (size, resultData) => {
            let html = '';
            
            // Structure overview
            const statusClass = resultData.pass ? 'text-green-600' : 'text-red-600';
            const statusIcon = resultData.pass ? 'âœ…' : 'âŒ';
            const statusText = resultData.pass ? 'é€šé' : 'å¤±æ•—';
            
            html += `
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-semibold text-gray-800">${size} çµæ§‹é©—è­‰ç‹€æ…‹</h4>
                        <span class="text-2xl ${statusClass} font-bold">
                            ${statusIcon} ${statusText}
                        </span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">å…§åŠå¾‘ (r1):</span>
                            <span class="font-mono font-semibold">${resultData.structure.r1} m</span>
                        </div>
                        <div>
                            <span class="text-gray-600">å¤–åŠå¾‘ (r2):</span>
                            <span class="font-mono font-semibold">${resultData.structure.r2} m</span>
                        </div>
                        <div>
                            <span class="text-gray-600">é«˜åº¦ (h):</span>
                            <span class="font-mono font-semibold">${resultData.structure.h} m</span>
                        </div>
                    </div>
                </div>
            `;

            // Detailed parameter comparison
            html += `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">è©³ç´°åƒæ•¸æ¯”è¼ƒ</h4>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">åƒæ•¸</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">è¨ˆç®—å€¼</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">è«–æ–‡æœŸæœ›å€¼</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç›¸å°èª¤å·®</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç‹€æ…‹</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
            `;

            const parameters = [
                {
                    name: 'Ï‰â‚ƒÂ² (sâ»Â²)',
                    calculated: resultData.calculated.omegaSquared,
                    expected: resultData.expected.omegaSquared,
                    error: resultData.errors.omegaSquared,
                    unit: 'sâ»Â²'
                },
                {
                    name: 'æœ€å¤§åŠ é€Ÿåº¦ (m/sÂ²)',
                    calculated: resultData.calculated.acceleration,
                    expected: resultData.expected.acceleration,
                    error: resultData.errors.acceleration || 0,
                    unit: 'm/sÂ²'
                },
                {
                    name: 'é›»å ´å¼·åº¦ (V/m)',
                    calculated: resultData.calculated.electricField,
                    expected: resultData.expected.electricField,
                    error: resultData.errors.electricField || 0,
                    unit: 'V/m'
                },
                {
                    name: 'æ¶²é«”åŠŸç‡å¯†åº¦ (W/mÂ³)',
                    calculated: resultData.calculated.powerDensityLiquid,
                    expected: resultData.expected.powerDensityLiquid,
                    error: resultData.errors.powerDensityLiquid || 0,
                    unit: 'W/mÂ³'
                },
                {
                    name: 'ç¸½åŠŸç‡å¯†åº¦ (W/mÂ³)',
                    calculated: resultData.calculated.powerDensityCombined,
                    expected: resultData.expected.powerDensityCombined,
                    error: resultData.errors.powerDensityCombined,
                    unit: 'W/mÂ³'
                }
            ];

            parameters.forEach(param => {
                const errorClass = param.error < 1 ? 'text-green-600' : param.error < 5 ? 'text-yellow-600' : 'text-red-600';
                const errorIcon = param.error < 1 ? 'âœ…' : param.error < 5 ? 'âš ï¸' : 'âŒ';
                
                html += `
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3 text-sm font-medium text-gray-900">${param.name}</td>
                        <td class="px-4 py-3 text-sm font-mono text-blue-800">
                            ${param.name.includes('Â²') ? param.calculated.toExponential(3) : param.calculated.toFixed(2)}
                        </td>
                        <td class="px-4 py-3 text-sm font-mono text-green-800">
                            ${param.name.includes('Â²') ? param.expected.toExponential(3) : param.expected.toFixed(2)}
                        </td>
                        <td class="px-4 py-3 text-sm font-mono ${errorClass}">
                            ${param.error.toFixed(2)}%
                        </td>
                        <td class="px-4 py-3 text-sm">
                            <span class="${errorClass}">${errorIcon}</span>
                        </td>
                    </tr>
                `;
            });

            html += `
                            </tbody>
                        </table>
                    </div>
                </div>
            `;

            // Physics interpretation
            html += `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">ç‰©ç†æ„ç¾©è§£é‡‹</h4>
                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-800 mb-2">é›¢å¿ƒé »ç‡ (Ï‰â‚ƒ)</h5>
                            <p class="text-sm text-blue-700">
                                é›¢å¿ƒé »ç‡æ±ºå®šäº†ç³»çµ±çš„æ—‹è½‰é€Ÿåº¦ï¼Œç›´æ¥å½±éŸ¿é›¢å¿ƒåŠ é€Ÿåº¦çš„å¤§å°ã€‚
                                è¼ƒé«˜çš„é »ç‡æœƒç”¢ç”Ÿæ›´å¼·çš„é›¢å¿ƒåŠ›ï¼Œå¢å¼·é›¢å­åˆ†é›¢æ•ˆæœã€‚
                            </p>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-800 mb-2">é›»å ´å¼·åº¦ (E)</h5>
                            <p class="text-sm text-green-700">
                                é›»å ´å¼·åº¦åæ˜ äº†é›¢å­åˆ†é›¢æ‰€ç”¢ç”Ÿçš„é›»ä½å·®å¼·åº¦ã€‚
                                æ ¹æ“šè«–æ–‡ç†è«–ï¼Œä¸åŒè³ªé‡çš„é›¢å­åœ¨é›¢å¿ƒå ´ä¸­æœƒç”¢ç”Ÿæœ‰æ•ˆçš„é›»è·åˆ†é›¢ã€‚
                            </p>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-purple-800 mb-2">åŠŸç‡å¯†åº¦ (P)</h5>
                            <p class="text-sm text-purple-700">
                                åŠŸç‡å¯†åº¦è¡¨ç¤ºå–®ä½é«”ç©å…§å¯ç”¢ç”Ÿçš„é›»åŠŸç‡ã€‚
                                ç¸½åŠŸç‡å¯†åº¦è€ƒæ…®äº†æ¶²é«”å’Œå›ºé«”éƒ¨åˆ†çš„é«”ç©æ¯”ä¾‹ï¼Œæ˜¯ç³»çµ±å¯¦éš›æ€§èƒ½çš„é—œéµæŒ‡æ¨™ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            `;

            // Engineering considerations
            html += `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">å·¥ç¨‹è€ƒé‡</h4>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <h6 class="font-semibold text-gray-800 mb-2">çµæ§‹è¨­è¨ˆå½±éŸ¿</h6>
                                <ul class="text-gray-700 space-y-1">
                                    <li>â€¢ ${size} çµæ§‹é©åˆ ${getStructureApplication(size)}</li>
                                    <li>â€¢ å…§å¾‘å½±éŸ¿æœ€å¤§åŠ é€Ÿåº¦</li>
                                    <li>â€¢ é«˜åº¦å½±éŸ¿ç¸½é«”ç©å’Œå®¹é‡</li>
                                </ul>
                            </div>
                            <div>
                                <h6 class="font-semibold text-gray-800 mb-2">æ€§èƒ½ç‰¹æ€§</h6>
                                <ul class="text-gray-700 space-y-1">
                                    <li>â€¢ åŠŸç‡å¯†åº¦: ${getPerformanceLevel(resultData.calculated.powerDensityCombined)}</li>
                                    <li>â€¢ é›»å ´å¼·åº¦: ${getFieldStrength(resultData.calculated.electricField)}</li>
                                    <li>â€¢ é©—è­‰ç‹€æ…‹: ${resultData.pass ? 'ç¬¦åˆç†è«–é æœŸ' : 'éœ€è¦é€²ä¸€æ­¥èª¿æ•´'}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            return html;
        };

        const getStructureApplication = (size) => {
            switch(size) {
                case 'SMALL': return 'å¯¦é©—å®¤ç ”ç©¶å’Œæ¦‚å¿µé©—è­‰';
                case 'MEDIUM': return 'å°å‹ç¤ºç¯„è¨­å‚™';
                case 'LARGE': return 'å·¥æ¥­ç´šæ‡‰ç”¨è¨­å‚™';
                default: return 'ä¸€èˆ¬æ‡‰ç”¨';
            }
        };

        const getPerformanceLevel = (powerDensity) => {
            if (powerDensity > 50) return 'é«˜æ•ˆèƒ½';
            if (powerDensity > 10) return 'ä¸­ç­‰æ•ˆèƒ½';
            return 'åŸºç¤æ•ˆèƒ½';
        };

        const getFieldStrength = (electricField) => {
            if (electricField > 20) return 'å¼·é›»å ´';
            if (electricField > 5) return 'ä¸­ç­‰é›»å ´';
            return 'å¼±é›»å ´';
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus('å°±ç·’', 'âš¡');
            console.log('Physics Engine Validation System Ready');
        });

        // Handle modal keyboard events
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                const modal = $('detail-modal');
                if (!modal.classList.contains('hidden')) {
                    closeTestDetail();
                }
            }
        });

        // Handle modal background click
        document.addEventListener('click', (event) => {
            const modal = $('detail-modal');
            if (event.target === modal) {
                closeTestDetail();
            }
        });
    </script>
</body>
</html>
